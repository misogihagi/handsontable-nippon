parcelRequire=function(e,r,n,t){function i(n,t){function o(e){return i(o.resolve(e))}function c(r){return e[n][1][r]||r}if(!r[n]){if(!e[n]){var l="function"==typeof parcelRequire&&parcelRequire;if(!t&&l)return l(n,!0);if(u)return u(n,!0);if(f&&"string"==typeof n)return f(n);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}o.resolve=c;var a=r[n]=new i.Module(n);e[n][0].call(a.exports,o,a,a.exports,this)}return r[n].exports}function o(e){this.id=e,this.bundle=i,this.exports={}}var u="function"==typeof parcelRequire&&parcelRequire,f="function"==typeof require&&require;i.isParcelRequire=!0,i.Module=o,i.modules=e,i.cache=r,i.parent=u;for(var c=0;c<n.length;c++)i(n[c]);if(n.length){var l=i(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):t&&(this[t]=l)}return i}({11:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function i(e){t(this,i),this._renderer=e,this._size=1,this._x=0,this._y=0,this._dir="r",this._isHead=!1}return e(i,[{key:"render",value:function(){this._isHead?this._renderer.renderValue(this._x,this._y,"sh"):this._renderer.rect(this._x,this._y,this._size,this._size)}},{key:"setAsHead",value:function(){this._isHead=!0}},{key:"link",value:function(e){var t=e.getSize(),i=e.getPosition(),n=e.getDirection();this.setDirection(n),"r"===n?this.setPosition(i.x-t,i.y):"l"===n?this.setPosition(i.x+t,i.y):"u"===n?this.setPosition(i.x,i.y+t):"d"===n&&this.setPosition(i.x,i.y-t)}},{key:"getPosition",value:function(){return{x:this._x,y:this._y}}},{key:"setPosition",value:function(e,t){return this._x=e,this._y=t,this}},{key:"getSize",value:function(){return this._size}},{key:"getDirection",value:function(){return this._dir}},{key:"setDirection",value:function(e){return this._dir=e,this}}]),i}();exports.SnakeElement=i;
},{}],8:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Snake=void 0;var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),t=require("./element");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=5,n=1,r="r",o=5,h=1,l=function(){function l(e){i(this,l),this._renderer=e,this._step=h,this._length=o,this._dir=r,this._posX=s*h,this._posY=n*h,this._collision=!1,this._elements=[],this._brakeMarkers=[],this.reset()}return e(l,[{key:"appendElement",value:function(){var e=new t.SnakeElement(this._renderer),i=this._elements[this._elements.length-1];e.link(i),this._elements.push(e)}},{key:"render",value:function(){this._renderElements()}},{key:"getPosition",value:function(){return this._getHeadElement().getPosition()}},{key:"reset",value:function(){this._elements.length=0,this._brakeMarkers.length=0,this._posX=s*h,this._posY=n*h,this._collision=!1,this._dir=r,this._buildElements()}},{key:"isHitWall",value:function(){var e=this._getHeadElement().getPosition(),t=e.x,i=e.y,s=this._getHeadElement().getSize();return t+s>this._renderer.getWidth()||t<0||i+s>this._renderer.getHeight()||i<0||"w"===this._renderer.getOrigCellSceneType(t,i)}},{key:"isDetectCollision",value:function(){return this._collision}},{key:"isCollision",value:function(e,t){var i=this._getHeadElement().getPosition();return i.x==e&&i.y==t}},{key:"moveUp",value:function(){"u"!=this._dir&&"d"!=this._dir&&(this._dir="u",this._move())}},{key:"moveRight",value:function(){"r"!=this._dir&&"l"!=this._dir&&(this._dir="r",this._move())}},{key:"moveDown",value:function(){"d"!=this._dir&&"u"!=this._dir&&(this._dir="d",this._move())}},{key:"moveLeft",value:function(){"l"!=this._dir&&"r"!=this._dir&&(this._dir="l",this._move())}},{key:"_move",value:function(){var e=this._getHeadElement();e.setDirection(this._dir),this._brakeMarkers.push({x:e.getPosition().x,y:e.getPosition().y,d:e.getDirection()})}},{key:"_renderElements",value:function(){for(var e=this._elements.length,t=0;t<e;t++){var i=this._elements[t].getPosition();if(this._brakeMarkers.length)for(var s=0;s<this._brakeMarkers.length;s++)this._brakeMarkers[s].x===i.x&&this._brakeMarkers[s].y===i.y&&(this._elements[t].setDirection(this._brakeMarkers[s].d),t==e-1&&this._brakeMarkers.splice(s,1));var n=this._elements[t].getDirection();0!==t&&this.isCollision(i.x,i.y)&&(this._collision=!0),"r"===n?this._elements[t].setPosition(i.x+this._step,i.y):"l"===n?this._elements[t].setPosition(i.x-this._step,i.y):"u"===n?this._elements[t].setPosition(i.x,i.y-this._step):"d"===n&&this._elements[t].setPosition(i.x,i.y+this._step),this._elements[t].render()}}},{key:"_getHeadElement",value:function(){return this._elements[0]}},{key:"_buildElements",value:function(){for(var e=0;e<o;e++){var i=new t.SnakeElement(this._renderer);0===e?(i.setDirection(this._dir),i.setPosition(this._posX,this._posY),i.setAsHead()):i.link(this._elements[e-1]),i.render(),this._elements.push(i)}}}]),l}();exports.Snake=l;
},{"./element":11}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e){t(this,r),this._x=0,this._y=0,this._size=1,this._renderer=e,this.randomCoordinates()}return e(r,[{key:"render",value:function(){this._renderer.renderValue(this._x,this._y,"🍎")}},{key:"randomCoordinates",value:function(){var e=this,t=this._renderer.getWidth()/this._size,r=this._renderer.getHeight()/this._size,i={x:(Math.random()*t>>0)*e._size,y:(Math.random()*r>>0)*e._size},n=i.x,s=i.y;"w"===this._renderer.getOrigCellSceneType(n,s)?(this._x=1,this._y=1):(this._x=n,this._y=s)}},{key:"getPosition",value:function(){return{x:this._x,y:this._y}}},{key:"getSize",value:function(){return this._size}}]),r}();exports.Apple=r;
},{}],13:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(e){t(this,n),this.element=document.querySelector("#snake"),this._ctx=this.element.getContext("2d")}return e(n,[{key:"rect",value:function(e,t,n,r,i){this._ctx&&(this._ctx.strokeStyle="rgba("+i+")",this._ctx.strokeRect(e,t,n,r))}},{key:"getWidth",value:function(){return this.element.width}},{key:"getHeight",value:function(){return this.element.height}},{key:"render",value:function(){this._ctx.clearRect(0,0,this.getWidth(),this.getHeight())}}]),n}();exports.CanvasRenderer=n;
},{}],14:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){return[[" A1"," B1"," C1"," D1"," E1"," F1"," G1"," H1"," I1"," J1"," K1"," L1"," M1"," N1"," O1"," P1"," Q1"],[" A2"," B2"," C2"," D2"," E2"," F2"," G2"," H2"," I2"," J2"," K2"," L2"," M2"," N2"," O2"," P2"," Q2"],[" A3"," B3"," C3"," D3"," E3"," F3"," G3"," H3"," I3"," J3"," K3"," L3"," M3"," N3"," O3"," P3"," Q3"],[" A4"," B4"," C4"," D4"," E4","  w"," G4","  w","  w","  w"," K4"," L4"," M4","  w"," O4"," P4"," Q4"],[" A5"," B5"," C5"," D5","  w","  w"," G5","  w"," I5","  w"," K5"," L5","  w","  w"," O5"," P5"," Q5"],[" A6"," B6"," C6","  w"," E6","  w"," G6","  w"," I6","  w"," K6","  w"," M6","  w"," O6"," P6"," Q6"],[" A7"," B7"," C7","  w"," E7","  w"," G7","  w"," I7","  w"," K7","  w"," M7","  w"," O7"," P7"," Q7"],[" A8"," B8"," C8","  w","  w","  w"," G8","  w"," I8","  w"," K8","  w","  w","  w"," O8"," P8"," Q8"],[" A9"," B9"," C9"," D9"," E9","  w"," G9","  w"," I9","  w"," K9"," L9"," M9","  w"," O9"," P9"," Q9"],["A10","B10","C10","D10","E10","  w","G10","  w","I10","  w","K10","L10","M10","  w","O10","P10","Q10"],["A11","B11","C11","D11","E11","  w","G11","  w","  w","  w","K11","L11","M11","  w","O11","P11","Q11"],["A12","B12","C12","D12","E12","F12","G12","H12","I12","J12","K12","L12","M12","N12","O12","P12","Q12"],["A13","B13","C13","D13","E13","F13","G13","H13","I13","J13","K13","L13","M13","N13","O13","P13","Q13"],["A14","B14","C14","D14","E14","F14","G14","H14","I14","J14","K14","L14","M14","N14","O14","P14","Q14"],["A15","B15","C15","D15","E15","F15","G15","H15","I15","J15","K15","L15","M15","N15","O15","P15","Q15"],["A16","B16","C16","D16","E16","F16","G16","H16","I16","J16","K16","L16","M16","N16","O16","P16","Q16"],["A17","B17","C17","D17","E17","F17","G17","H17","I17","J17","K17","L17","M17","N17","O17","P17","Q17"],["A18","B18","C18","D18","E18","F18","G18","H18","I18","J18","K18","L18","M18","N18","O18","P18","Q18"]]},a=function(){function a(e){var r=this;t(this,a),this._data=n(),this._width=this._data[0].length,this._height=this._data.length,this._ctx=new Handsontable(e,{data:this._data,readOnly:!0,outsideClickDeselects:!1,maxRows:this._height,maxCols:this._width,renderer:function(){return r._renderer.apply(r,arguments)}})}return e(a,[{key:"rect",value:function(e,t,n,a,r){this.renderValue(e,t,"s")}},{key:"renderValue",value:function(e,t,n){e>=0&&e<this._width&&t>=0&&t<this._height&&(this._data[t][e]=n,this._ctx.render())}},{key:"getOrigCellSceneType",value:function(e,t){return n()[t][e].trim()}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"render",value:function(){for(var e=this._data.length,t=n(),a=0;a<e;a++)this._data[a]=t[a];this._ctx.render()}},{key:"_renderer",value:function(e,t,n,a,r,i,s){i=i.trim(),t.classList.add("htDimmed"),"s"===i?t.classList.add("snake"):"sh"===i?t.classList.add("snake-head"):"w"===i?(t.classList.add("cell-dark"),t.classList.add("wall")):t.textContent=i}}]),a}();exports.HandsontableRenderer=a;
},{}],12:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HandsontableRenderer=exports.CanvasRenderer=void 0;var e=require("./canvas"),r=require("./handsontable");exports.CanvasRenderer=e.CanvasRenderer,exports.HandsontableRenderer=r.HandsontableRenderer;
},{"./canvas":13,"./handsontable":14}],10:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRenderer=exports.useRenderer=void 0;var e=require("./renderers"),r={canvas:e.CanvasRenderer,handsontable:e.HandsontableRenderer},n=void 0;function t(e,t){return n=new r[e](t)}function s(){return n}exports.useRenderer=t,exports.getRenderer=s;
},{"./renderers":12}],5:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t=require("./snake"),n=require("./apple"),i=require("./renderer");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function s(){r(this,s),this.d=document,this.w=window,this._timer,this._snake,this._apple,this._renderer,this._gameOver=!1,this.init()}return e(s,[{key:"init",value:function(){var e=this;this.d.addEventListener("keydown",function(t){switch(t.keyCode){case 38:e._snake.moveUp();break;case 39:e._snake.moveRight();break;case 40:e._snake.moveDown();break;case 37:e._snake.moveLeft()}})}},{key:"useRenderer",value:function(e,t){this._renderer=(0,i.useRenderer)(e,t)}},{key:"getRenderer",value:function(){return this._renderer}},{key:"start",value:function(){var e=this;this._timer||this._gameOver||(this._snake=new t.Snake(this._renderer),this._apple=new n.Apple(this._renderer),this._snake.reset(),this.loop(),this._timer=setInterval(function(){return e.loop()},600),setTimeout(function(){e.stop(),e._timer=setInterval(function(){return e.loop()},300)},3e3),setTimeout(function(){e.stop(),e._timer=setInterval(function(){return e.loop()},200)},6e3),setTimeout(function(){e.stop(),e._timer=setInterval(function(){return e.loop()},100)},9e3))}},{key:"loop",value:function(){this._gameOver||(this._renderer.render(),this._snake.render(),this._isEatApple()&&(this._apple.randomCoordinates(),this._snake.appendElement()),this._apple.render(),(this._snake.isHitWall()||this._snake.isDetectCollision())&&(this.stop(),this.gameOver()))}},{key:"_isEatApple",value:function(){return this._snake.getPosition().x==this._apple.getPosition().x&&this._snake.getPosition().y==this._apple.getPosition().y}},{key:"stop",value:function(){clearInterval(this._timer),this._timer=null}},{key:"gameOver",value:function(){this._gameOver=!0}}]),s}();exports.Game=s;
},{"./snake":8,"./apple":9,"./renderer":10}],3:[function(require,module,exports) {
"use strict";var e=require("./app/game"),r=new e.Game;r.useRenderer("handsontable",document.querySelector("#hot")),r.start();
},{"./app/game":5}]},{},[3], null)
//# sourceMappingURL=/js.65475b28.map